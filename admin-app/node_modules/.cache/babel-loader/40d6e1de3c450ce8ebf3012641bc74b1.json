{"ast":null,"code":"var _jsxFileName = \"/home/yazkh/Documents/WebDevelopment/ZingVibesWeb/admin-app/src/components/container/category/Category.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Col, Container, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getAllCategory, addCategory, updateCategories } from '../../../actions/actions';\nimport Input from '../../UI/input/Input.ui';\nimport NewModal from '../../UI/modal/modal';\nimport Layout from '../../layouts/header.layout';\nimport CheckboxTree from 'react-checkbox-tree';\nimport 'react-checkbox-tree/lib/react-checkbox-tree.css';\nimport { IoCheckbox, IoArrowDown, IoArrowForward } from 'react-icons/io5';\nimport { IoIosCheckboxOutline } from 'react-icons/io';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Category = props => {\n  _s();\n\n  const [categoryName, setCategoryName] = useState('');\n  const [parentCategoryId, setParentCategoryId] = useState('');\n  const [categoryImage, setCategoryImage] = useState('');\n  const [updateCategoryModal, setUpdateCategoryModal] = useState(false);\n  const [show, setShow] = useState(false);\n  const [checked, setChecked] = useState([]);\n  const [expanded, setExpanded] = useState([]);\n  const [checkedArray, setCheckedArray] = useState([]);\n  const [expandedArray, setExpandedArray] = useState([]);\n  const [deleteCategoryModal, setDeleteCategoryModal] = useState(false);\n  const category = useSelector(state => state.category);\n  const dispatch = useDispatch();\n\n  const handleClose = () => {\n    const form = new FormData();\n    form.append('name', categoryName);\n    form.append('parentId', parentCategoryId);\n    form.append('categoryPicture', categoryImage);\n    dispatch(addCategory(form)); // window.location.reload(false)\n\n    setCategoryName('');\n    setParentCategoryId(''); // const cat = {\n    //   categoryName,\n    //   parentCategoryId,\n    //   categoryImage,\n    // }\n    // console.log(cat)\n\n    setShow(false);\n  };\n\n  const handleShow = () => setShow(true);\n\n  const renderCategories = categories => {\n    let myCategories = [];\n\n    for (let category of categories) {\n      myCategories.push({\n        label: category.name,\n        value: category._id,\n        children: category.children.length > 0 && renderCategories(category.children)\n      });\n    }\n\n    return myCategories;\n  };\n\n  const createCategoryList = (categories, options = []) => {\n    for (let category of categories) {\n      options.push({\n        value: category._id,\n        name: category.name,\n        parentId: category.parentId,\n        type: category.type\n      });\n\n      if (category.children.length > 0) {\n        createCategoryList(category.children, options);\n      }\n    }\n\n    return options;\n  };\n\n  const handleCategoryImage = e => {\n    setCategoryImage(e.target.files[0]);\n  };\n\n  const updateCategory = () => {\n    setUpdateCategoryModal(true);\n    const categories = createCategoryList(category.categories);\n    const checkedArray = [];\n    const expandedArray = [];\n    checked.length > 0 && checked.forEach((categoryId, index) => {\n      const category = categories.find((category, _index) => categoryId === category.value); //there is maybe a change a catgeory won't match, so just for safety we will have to do this\n\n      category && checkedArray.push(category);\n    });\n    expanded.length > 0 && expanded.forEach((categoryId, index) => {\n      const category = categories.find((category, _index) => categoryId === category.value); //there is maybe a change a catgeory won't match, so just for safety we will have to do this\n\n      category && expandedArray.push(category);\n    }); //these two will help to modify the inputs in edit category\n\n    setCheckedArray(checkedArray);\n    setExpandedArray(expandedArray);\n    console.log({\n      checked,\n      expanded,\n      categories,\n      checkedArray,\n      expandedArray\n    });\n  };\n\n  const handleCategoryInput = (key, value, index, type) => {\n    if (type == 'checked') {\n      const updatedCheckedArray = checkedArray.map((item, _index) => index == _index ? { ...item,\n        [key]: value\n      } : item);\n      setCheckedArray(updatedCheckedArray);\n    } else if (type == 'expanded') {\n      const updatedExpandedArray = expandedArray.map((item, _index) => index == _index ? { ...item,\n        [key]: value\n      } : item);\n      setExpandedArray(updatedExpandedArray);\n    }\n  };\n\n  {\n    /* Edit Categories */\n  }\n\n  const updateCategoriesForm = () => {\n    const form = new FormData();\n    expandedArray.forEach((item, index) => {\n      form.append('_id', item.value);\n      form.append('name', item.name);\n      form.append('parentId', item.parentId ? item.parentId : '');\n      form.append('type', item.type);\n    });\n    checkedArray.forEach((item, index) => {\n      form.append('_id', item.value);\n      form.append('name', item.name);\n      form.append('parentId', item.parentId ? item.parentId : '');\n      form.append('type', item.type);\n    });\n    dispatch(updateCategories(form)).then(result => {\n      if (result) {\n        dispatch(getAllCategory());\n      }\n    });\n    setUpdateCategoryModal(false);\n  };\n\n  const renderUpdateCategoriesModal = () => {\n    return /*#__PURE__*/_jsxDEV(NewModal, {\n      show: updateCategoryModal,\n      handleClose: updateCategoriesForm,\n      modalTitle: 'Update Categories',\n      size: \"lg\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: \"Expanded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), expandedArray.length > 0 && expandedArray.map((item, index) => /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: item.name,\n            placeholder: 'Category Name',\n            onChange: e => handleCategoryInput('name', e.target.value, index, 'expanded')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control\",\n            value: item.parentId,\n            onChange: e => handleCategoryInput('name', e.target.value, index, 'expanded'),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"select category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this), createCategoryList(category.categories).map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: option.value,\n              children: option.name\n            }, option.value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"store\",\n              children: \"Store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"product\",\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"page\",\n              children: \"Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: \"Checked\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), checkedArray.length > 0 && checkedArray.map((item, index) => /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: item.name,\n            placeholder: 'Category Name',\n            onChange: e => handleCategoryInput('name', e.target.value, index, 'checked')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control\",\n            value: item.parentId,\n            onChange: e => handleCategoryInput('name', e.target.value, index, 'checked'),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"select category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 19\n            }, this), createCategoryList(category.categories).map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: option.value,\n              children: option.name\n            }, option.value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"store\",\n              children: \"Store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"product\",\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"page\",\n              children: \"Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this);\n  };\n\n  const deleteCategory = () => {\n    setDeleteCategoryModal(true);\n  };\n\n  const renderDeleteCategoryModal = () => {\n    return /*#__PURE__*/_jsxDEV(NewModal, {\n      modalTitle: \"Confirm\",\n      show: deleteCategoryModal,\n      handleClose: () => {\n        setDeleteCategoryModal(false);\n      },\n      buttons: [{\n        label: 'No',\n        color: 'primary',\n        onClick: () => {\n          alert('no');\n        },\n        label: 'Yes',\n        color: 'danger',\n        onClick: () => {\n          alert('yes');\n        }\n      }],\n      children: \"Are you sure?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderAddCategoryModal = () => {\n    return /*#__PURE__*/_jsxDEV(NewModal, {\n      show: show,\n      handleClose: handleClose,\n      modalTitle: 'Add New Category',\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        value: categoryName,\n        placeholder: 'Category Name',\n        onChange: e => setCategoryName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-control\",\n        value: parentCategoryId,\n        onChange: e => setParentCategoryId(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"select category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), createCategoryList(category.categories).map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: option.value,\n          children: option.name\n        }, option.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"categoryImage\",\n        onChange: handleCategoryImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      sidebar: true,\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: 12,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleShow,\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: 12,\n            children: /*#__PURE__*/_jsxDEV(CheckboxTree, {\n              nodes: renderCategories(category.categories),\n              checked: checked,\n              expanded: expanded,\n              onCheck: checked => setChecked(checked),\n              onExpand: expanded => setExpanded(expanded),\n              icons: {\n                check: /*#__PURE__*/_jsxDEV(IoCheckbox, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 26\n                }, this),\n                uncheck: /*#__PURE__*/_jsxDEV(IoIosCheckboxOutline, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 28\n                }, this),\n                halfCheck: /*#__PURE__*/_jsxDEV(IoIosCheckboxOutline, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 30\n                }, this),\n                expandClose: /*#__PURE__*/_jsxDEV(IoArrowForward, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 32\n                }, this),\n                expandOpen: /*#__PURE__*/_jsxDEV(IoArrowDown, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 31\n                }, this)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deleteCategory,\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: updateCategory,\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), renderAddCategoryModal(), renderUpdateCategoriesModal(), renderDeleteCategoryModal()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Category, \"KqvShNLTgyl7jSKsVIkANTFRqo4=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Category;\nexport default Category;\n\nvar _c;\n\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"sources":["/home/yazkh/Documents/WebDevelopment/ZingVibesWeb/admin-app/src/components/container/category/Category.js"],"names":["React","useState","useEffect","Col","Container","Row","useDispatch","useSelector","getAllCategory","addCategory","updateCategories","Input","NewModal","Layout","CheckboxTree","IoCheckbox","IoArrowDown","IoArrowForward","IoIosCheckboxOutline","Category","props","categoryName","setCategoryName","parentCategoryId","setParentCategoryId","categoryImage","setCategoryImage","updateCategoryModal","setUpdateCategoryModal","show","setShow","checked","setChecked","expanded","setExpanded","checkedArray","setCheckedArray","expandedArray","setExpandedArray","deleteCategoryModal","setDeleteCategoryModal","category","state","dispatch","handleClose","form","FormData","append","handleShow","renderCategories","categories","myCategories","push","label","name","value","_id","children","length","createCategoryList","options","parentId","type","handleCategoryImage","e","target","files","updateCategory","forEach","categoryId","index","find","_index","console","log","handleCategoryInput","key","updatedCheckedArray","map","item","updatedExpandedArray","updateCategoriesForm","then","result","renderUpdateCategoriesModal","option","deleteCategory","renderDeleteCategoryModal","color","onClick","alert","renderAddCategoryModal","display","justifyContent","check","uncheck","halfCheck","expandClose","expandOpen"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Col, Container, Row } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  getAllCategory,\n  addCategory,\n  updateCategories,\n} from '../../../actions/actions'\nimport Input from '../../UI/input/Input.ui'\nimport NewModal from '../../UI/modal/modal'\nimport Layout from '../../layouts/header.layout'\nimport CheckboxTree from 'react-checkbox-tree'\nimport 'react-checkbox-tree/lib/react-checkbox-tree.css'\nimport { IoCheckbox, IoArrowDown, IoArrowForward } from 'react-icons/io5'\n\nimport { IoIosCheckboxOutline } from 'react-icons/io'\n\nconst Category = (props) => {\n  const [categoryName, setCategoryName] = useState('')\n  const [parentCategoryId, setParentCategoryId] = useState('')\n  const [categoryImage, setCategoryImage] = useState('')\n  const [updateCategoryModal, setUpdateCategoryModal] = useState(false)\n  const [show, setShow] = useState(false)\n\n  const [checked, setChecked] = useState([])\n  const [expanded, setExpanded] = useState([])\n\n  const [checkedArray, setCheckedArray] = useState([])\n  const [expandedArray, setExpandedArray] = useState([])\n\n  const [deleteCategoryModal, setDeleteCategoryModal] = useState(false)\n\n  const category = useSelector((state) => state.category)\n  const dispatch = useDispatch()\n\n  const handleClose = () => {\n    const form = new FormData()\n\n    form.append('name', categoryName)\n    form.append('parentId', parentCategoryId)\n    form.append('categoryPicture', categoryImage)\n    dispatch(addCategory(form))\n    // window.location.reload(false)\n    setCategoryName('')\n    setParentCategoryId('')\n    // const cat = {\n    //   categoryName,\n    //   parentCategoryId,\n    //   categoryImage,\n    // }\n\n    // console.log(cat)\n\n    setShow(false)\n  }\n  const handleShow = () => setShow(true)\n\n  const renderCategories = (categories) => {\n    let myCategories = []\n    for (let category of categories) {\n      myCategories.push({\n        label: category.name,\n        value: category._id,\n        children:\n          category.children.length > 0 && renderCategories(category.children),\n      })\n    }\n    return myCategories\n  }\n\n  const createCategoryList = (categories, options = []) => {\n    for (let category of categories) {\n      options.push({\n        value: category._id,\n        name: category.name,\n        parentId: category.parentId,\n        type: category.type,\n      })\n      if (category.children.length > 0) {\n        createCategoryList(category.children, options)\n      }\n    }\n\n    return options\n  }\n\n  const handleCategoryImage = (e) => {\n    setCategoryImage(e.target.files[0])\n  }\n\n  const updateCategory = () => {\n    setUpdateCategoryModal(true)\n    const categories = createCategoryList(category.categories)\n    const checkedArray = []\n    const expandedArray = []\n    checked.length > 0 &&\n      checked.forEach((categoryId, index) => {\n        const category = categories.find(\n          (category, _index) => categoryId === category.value\n        )\n\n        //there is maybe a change a catgeory won't match, so just for safety we will have to do this\n        category && checkedArray.push(category)\n      })\n\n    expanded.length > 0 &&\n      expanded.forEach((categoryId, index) => {\n        const category = categories.find(\n          (category, _index) => categoryId === category.value\n        )\n\n        //there is maybe a change a catgeory won't match, so just for safety we will have to do this\n        category && expandedArray.push(category)\n      })\n\n    //these two will help to modify the inputs in edit category\n    setCheckedArray(checkedArray)\n    setExpandedArray(expandedArray)\n\n    console.log({ checked, expanded, categories, checkedArray, expandedArray })\n  }\n\n  const handleCategoryInput = (key, value, index, type) => {\n    if (type == 'checked') {\n      const updatedCheckedArray = checkedArray.map((item, _index) =>\n        index == _index ? { ...item, [key]: value } : item\n      )\n      setCheckedArray(updatedCheckedArray)\n    } else if (type == 'expanded') {\n      const updatedExpandedArray = expandedArray.map((item, _index) =>\n        index == _index ? { ...item, [key]: value } : item\n      )\n      setExpandedArray(updatedExpandedArray)\n    }\n  }\n  {\n    /* Edit Categories */\n  }\n\n  const updateCategoriesForm = () => {\n    const form = new FormData()\n    expandedArray.forEach((item, index) => {\n      form.append('_id', item.value)\n      form.append('name', item.name)\n      form.append('parentId', item.parentId ? item.parentId : '')\n      form.append('type', item.type)\n    })\n\n    checkedArray.forEach((item, index) => {\n      form.append('_id', item.value)\n      form.append('name', item.name)\n      form.append('parentId', item.parentId ? item.parentId : '')\n      form.append('type', item.type)\n    })\n\n    dispatch(updateCategories(form)).then((result) => {\n      if (result) {\n        dispatch(getAllCategory())\n      }\n    })\n\n    setUpdateCategoryModal(false)\n  }\n\n  const renderUpdateCategoriesModal = () => {\n    return (\n      <NewModal\n        show={updateCategoryModal}\n        handleClose={updateCategoriesForm}\n        modalTitle={'Update Categories'}\n        size=\"lg\"\n      >\n        <Row>\n          <Col>\n            <h6>Expanded</h6>\n          </Col>\n        </Row>\n        {expandedArray.length > 0 &&\n          expandedArray.map((item, index) => (\n            <Row key={index}>\n              <Col>\n                <Input\n                  value={item.name}\n                  placeholder={'Category Name'}\n                  onChange={(e) =>\n                    handleCategoryInput(\n                      'name',\n                      e.target.value,\n                      index,\n                      'expanded'\n                    )\n                  }\n                />\n              </Col>\n\n              <Col>\n                <select\n                  className=\"form-control\"\n                  value={item.parentId}\n                  onChange={(e) =>\n                    handleCategoryInput(\n                      'name',\n                      e.target.value,\n                      index,\n                      'expanded'\n                    )\n                  }\n                >\n                  <option>select category</option>\n                  {createCategoryList(category.categories).map((option) => (\n                    <option key={option.value} value={option.value}>\n                      {option.name}\n                    </option>\n                  ))}\n                </select>\n              </Col>\n              <Col>\n                <select className=\"form-control\">\n                  <option value=\"\">Select type</option>\n                  <option value=\"store\">Store</option>\n                  <option value=\"product\">Product</option>\n                  <option value=\"page\">Page</option>\n                </select>\n              </Col>\n            </Row>\n          ))}\n\n        <Row>\n          <Col>\n            <h6>Checked</h6>\n          </Col>\n        </Row>\n        {checkedArray.length > 0 &&\n          checkedArray.map((item, index) => (\n            <Row key={index}>\n              <Col>\n                <Input\n                  value={item.name}\n                  placeholder={'Category Name'}\n                  onChange={(e) =>\n                    handleCategoryInput(\n                      'name',\n                      e.target.value,\n                      index,\n                      'checked'\n                    )\n                  }\n                />\n              </Col>\n\n              <Col>\n                <select\n                  className=\"form-control\"\n                  value={item.parentId}\n                  onChange={(e) =>\n                    handleCategoryInput(\n                      'name',\n                      e.target.value,\n                      index,\n                      'checked'\n                    )\n                  }\n                >\n                  <option>select category</option>\n                  {createCategoryList(category.categories).map((option) => (\n                    <option key={option.value} value={option.value}>\n                      {option.name}\n                    </option>\n                  ))}\n                </select>\n              </Col>\n              <Col>\n                <select className=\"form-control\">\n                  <option value=\"\">Select type</option>\n                  <option value=\"store\">Store</option>\n                  <option value=\"product\">Product</option>\n                  <option value=\"page\">Page</option>\n                </select>\n              </Col>\n            </Row>\n          ))}\n\n        {/* <input\n            type=\"file\"\n            name=\"categoryImage\"\n            onChange={handleCategoryImage}\n          ></input> */}\n      </NewModal>\n    )\n  }\n\n  const deleteCategory = () => {\n    setDeleteCategoryModal(true)\n  }\n\n  const renderDeleteCategoryModal = () => {\n    return (\n      <NewModal\n        modalTitle=\"Confirm\"\n        show={deleteCategoryModal}\n        handleClose={() => {\n          setDeleteCategoryModal(false)\n        }}\n        buttons={[\n          {\n            label: 'No',\n            color: 'primary',\n            onClick: () => {\n              alert('no')\n            },\n            label: 'Yes',\n            color: 'danger',\n            onClick: () => {\n              alert('yes')\n            },\n          },\n        ]}\n      >\n        Are you sure?\n      </NewModal>\n    )\n  }\n\n  const renderAddCategoryModal = () => {\n    return (\n      <NewModal\n        show={show}\n        handleClose={handleClose}\n        modalTitle={'Add New Category'}\n      >\n        <Input\n          value={categoryName}\n          placeholder={'Category Name'}\n          onChange={(e) => setCategoryName(e.target.value)}\n        />\n        <select\n          className=\"form-control\"\n          value={parentCategoryId}\n          onChange={(e) => setParentCategoryId(e.target.value)}\n        >\n          <option>select category</option>\n          {createCategoryList(category.categories).map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.name}\n            </option>\n          ))}\n        </select>\n        <input\n          type=\"file\"\n          name=\"categoryImage\"\n          onChange={handleCategoryImage}\n        ></input>\n      </NewModal>\n    )\n  }\n\n  return (\n    <div>\n      <Layout sidebar>\n        <Container>\n          <Row>\n            <Col md={12}>\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <h3>Category</h3>\n                <button onClick={handleShow}>Add</button>\n              </div>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={12}>\n              {/* <ul>{renderCategories(category.categories)}</ul>\n               */}\n\n              <CheckboxTree\n                nodes={renderCategories(category.categories)}\n                checked={checked}\n                expanded={expanded}\n                onCheck={(checked) => setChecked(checked)}\n                onExpand={(expanded) => setExpanded(expanded)}\n                icons={{\n                  check: <IoCheckbox />,\n                  uncheck: <IoIosCheckboxOutline />,\n                  halfCheck: <IoIosCheckboxOutline />,\n                  expandClose: <IoArrowForward />,\n                  expandOpen: <IoArrowDown />,\n                }}\n              />\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <button onClick={deleteCategory}>Delete</button>\n              <button onClick={updateCategory}>Edit</button>\n            </Col>\n          </Row>\n        </Container>\n        {renderAddCategoryModal()}\n        {renderUpdateCategoriesModal()}\n        {renderDeleteCategoryModal()}\n      </Layout>\n    </div>\n  )\n}\n\nexport default Category\n"]},"metadata":{},"sourceType":"module"}